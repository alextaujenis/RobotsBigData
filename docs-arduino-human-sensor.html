<!DOCTYPE html><html lang="en"><head><title>Robots + Big Data: Arduino Human Sensor Docs</title><meta name="description" content="An Arduino library to detect human presence, touch, and pickup events by measuring change in capacitance."><link href="assets/style/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="assets/style/shCore.css" rel="stylesheet" type="text/css"><link href="assets/style/shCoreDefault.css" rel="stylesheet" type="text/css"><link href="assets/style/shThemeDefault.css" rel="stylesheet" type="text/css"><link href="assets/style/style.css" rel="stylesheet" type="text/css"><link href="assets/style/docs.css" rel="stylesheet" type="text/css"><link href="assets/style/install.css" rel="stylesheet" type="text/css"><link href="assets/style/index.css" rel="stylesheet" type="text/css"><link rel="shortcut icon" href="assets/images/favicon.png"><meta content="width=device-width, initial-scale=1" name="viewport"></head><body><div id="top"></div><div class="top-nav-spacer1 stuck">&nbsp;</div><div class="top-nav-spacer2">&nbsp;</div><div class="navbar navbar-default navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><button id="toggle" type="button" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="index.html" class="navbar-brand"><img src="assets/images/robots-big-data-logo-sm.png" alt="Robots + Big Data"></a></div><!-- Collect the links for mobile toggling--><div id="navbar-collapse" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="install.html">Install</a></li><li><a href="docs-arduino.html">Docs</a></li><li><a href="github.html">GitHub</a></li><li><a href="#top" style="display:none;" class="back-to-top">BACK TO TOP</a></li></ul></div></div></div><div class="container-fluid"><div class="row"><div class="hidden-xs col-sm-4 stuck"><div class="panel panel-default side-panel"><div class="panel-heading"><div class="panel-title"><a href="docs-arduino.html">Arduino Libraries</a></div></div><div translate="no" class="panel-body"><h3 translate="yes">Components</h3><ul><li><a href="docs-arduino-button.html" class="rbd_button">Button</a></li><li><a href="docs-arduino-light.html" class="rbd_light">Light</a></li><li><a href="docs-arduino-motor.html" class="rbd_motor">Motor</a></li><li><a href="docs-arduino-servo.html" class="rbd_servo">Servo</a></li></ul><h3 translate="yes">Sensors</h3><ul><li><a href="docs-arduino-light-sensor.html" class="rbd_light_sensor">Light Sensor</a></li><li><a href="docs-arduino-water-sensor.html" class="rbd_water_sensor">Water Sensor</a></li><li><a href="docs-arduino-human-sensor.html" class="rbd_human_sensor">Human Sensor</a></li></ul><h3 translate="yes">Additional Libraries</h3><ul><li><a href="docs-arduino-timer.html" class="rbd_timer">Timer</a></li><li><a href="docs-arduino-threshold.html" class="rbd_threshold">Threshold</a></li><li><a href="docs-arduino-capacitance.html" class="rbd_capacitance">Capacitance</a></li><li><a href="docs-arduino-serial-manager.html" class="rbd_serial_manager">Serial Manager</a></li></ul></div></div></div><div class="documentation col-sm-8"><div class="breadcrumb-container stuck"><ol class="breadcrumb"><li><a href="index.html">Home</a></li><li><a href="docs-arduino.html">Arduino</a></li><li translate="no" class="active">Human Sensor</li></ol><div class="breadcrumb-icons pull-right"><div class="icon-container pull-right"><a href="https://github.com/alextaujenis/RBD_HumanSensor"><div class="icon"><div class="image"><img src="assets/images/github-logo.png" alt="GitHub Logo"></div><div class="text-container"><div class="name">View Source on GitHub</div><div class="subtitle">with MIT License</div></div></div></a></div><div data-toggle="tooltip" data-placement="bottom" title="Click here to see how to install this library" class="icon-container pull-right download-button"><div class="icon"><div class="image"><img src="assets/images/arduino-library-icon.png" alt=".ino icon"></div><div class="text-container"><div class="name">How To Install</div><div class="subtitle">in the Arduino IDE</div></div></div></div><div class="clearfix"></div></div><div class="clearfix"></div></div><div class="jumbotron"><div class="click-through"><div class="row jumbotron-header click-through"><div class="col-xs-12 text-right click-through"><span class="label label-info title-label">Arduino</span></div></div></div><div class="jumbotron-container"><h2 translate="no">Human Sensor<small translate="yes">API DOCUMENTATION</small></h2><p id="RBD_HumanSensor">Detect human presence, touch, and pickup events.<small class="version"></small></p><a href="#example-wiring" class="btn btn-primary">See Example</a>&nbsp;&nbsp;<a href="#public-methods" class="btn btn-default">Public Methods</a>&nbsp;&nbsp;<a href="https://github.com/alextaujenis/RBD_HumanSensor/releases" class="btn btn-default">Release Notes</a></div></div><div class="h3"><div id="overview" class="anchor"></div>Overview</div><p class="lead">Detect and interact with humans through change in capacitance. You can calibrate this library for your sensor very quickly to detect&nbsp;<a href="#onnear" translate="no" class="click-flash">onNear()</a>,&nbsp;<a href="#ontouch" translate="no" class="click-flash">onTouch()</a>, and&nbsp;<a href="#onpickup" translate="no" class="click-flash">onPickup()</a> events. The example below uses a piece of aluminum foil, but you can attach the wire to anything conductive and calibrate the sensor accordingly.</p><p class="lead">This library measures relative capacitance so it is prone to interference. You can temporarily adjust the entire scale and then reset it when the capacitance disruption has stopped by using&nbsp;<a href="#setmodifier" translate="no" class="click-flash">setModifier()</a> and&nbsp;<a href="#resetmodifier" translate="no" class="click-flash">resetModifier()</a>. Look at the&nbsp;<a href="docs-arduino-capacitance.html">Capacitance Library</a> if you would like to know more about how capacitance is calculated.</p><div class="h3"><div id="example-wiring" class="anchor"></div>Example Wiring</div><ol><li>Connect Arduino&nbsp;<span class="blue-wire">digital pin 2</span> to a&nbsp;<b>10Meg&#8486; resistor</b></li><li>Connect the other end of the&nbsp;<b>10Meg&#8486; resistor</b> to Arduino&nbsp;<span class="control-wire">digital pin 3</span></li><li>Connect Arduino&nbsp;<span class="control-wire">digital pin 3</span> to a piece of conductive material (aluminum foil)</li><li>Cover the conductive material with non-conductive material (tape)</li><li>Load the&nbsp;<a href="#example-sketch">Example&nbsp;<span translate="no">Sketch</span></a> onto the Arduino</li><li>Open a serial connection at 115200 baud to see the reported values</li><li><a href="#example-sketch-calibration">Calibrate</a> the human sensor</li></ol><p><img src="assets/images/arduino-capacitance-wiring-diagram.png" alt="A piece of aluminum foil connected to a 10 Meg Ohm resistor that is bridged across Arduino digital pins 2 and 3." class="img-responsive"></p><div class="h3"><div id="example-sketch" class="anchor"></div>Example&nbsp;<span translate="no">Sketch</span><span class="label label-info">Arduino</span><span class="label label-primary">C++</span></div><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[#include <RBD_Capacitance.h>
#include <RBD_Threshold.h>
#include <RBD_HumanSensor.h>

RBD::HumanSensor human_sensor(2, 3); // send, receive pin

void setup() {
  Serial.begin(115200);
  human_sensor.setNearValue(100);
  human_sensor.setTouchValue(200);
  human_sensor.setPickupValue(300);
}

void loop() {
  human_sensor.update();

  if(human_sensor.onGone()) {
    Serial.print("0. GONE   ");
  }
  else if(human_sensor.onNear()) {
    Serial.print("1. NEAR   ");
  }
  else if(human_sensor.onTouch()) {
    Serial.print("2. TOUCH  ");
  }
  else if(human_sensor.onPickup()) {
    Serial.print("3. PICKUP ");
  }

  if(human_sensor.onRawValueChange()) {
    Serial.println(human_sensor.getRawValue());
  }
}
]]></script></div><div class="h3"><div id="example-sketch-calibration" class="anchor"></div>Example&nbsp;<span translate="no">Sketch</span> Calibration</div><p>Follow these steps to calibrate each human sensor before use:</p><ol><li><a href="#example-wiring">Set up the human sensor</a> then open a serial connection to the Arduino</li><li>Move your hand just near the sensor to see the Raw Value change</li><li>Change the&nbsp;<a href="#setnearvalue" translate="no" class="click-flash">setNearValue()</a> to the Raw Value&nbsp;<i>- in the&nbsp;<a href="#example-sketch">example&nbsp;<span translate="no">sketch</span></a> setup()</i></li><li>Touch the sensor to see the Raw Value change</li><li>Change the&nbsp;<a href="#settouchvalue" translate="no" class="click-flash">setTouchValue()</a> to the new Raw Value</li><li>Pick up the sensor to see the Raw Value change (if it is attached to an object)</li><li>Change the&nbsp;<a href="#setpickupvalue" translate="no" class="click-flash">setPickupValue()</a> to the new Raw Value</li><li>Load the calibrated&nbsp;<span translate="no">sketch</span> back into the Arduino</li><li>The human sensor is calibrated and ready to use</li></ol><div class="h3"><div id="public-methods" class="anchor"></div>Public Methods</div><p>You must continuously call&nbsp;<a href="#update" translate="no" class="click-flash">update()</a> inside of loop() in order to use the<span class="label label-success">Real-Time</span> methods tagged below.</p><h4 translate="no" class="class-name"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[RBD::HumanSensor
]]></script></h4><ul translate="no" class="public-methods"><li><a href="#constructor" class="click-flash">constructor(send_pin, receive_pin)</a></li><li class="divider"></li><li><a href="#setsamplesize" class="click-flash">.setSampleSize(value)</a></li><li><a href="#setnearvalue" class="click-flash">.setNearValue(value)</a></li><li><a href="#settouchvalue" class="click-flash">.setTouchValue(value)</a></li><li><a href="#setpickupvalue" class="click-flash">.setPickupValue(value)</a></li><li class="divider"></li><li><a href="#update" class="click-flash">.update()</a><span data-toggle="tooltip" data-placement="right" title="You must continuously call this method within loop() to use any Real-Time methods." class="label label-primary"><img src="assets/images/update.png" alt="Update"></span></li><li><a href="#isgone" class="click-flash">.isGone()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></li><li><a href="#isnear" class="click-flash">.isNear()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></li><li><a href="#istouch" class="click-flash">.isTouch()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></li><li><a href="#ispickup" class="click-flash">.isPickup()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></li><li class="divider"></li><li><a href="#ongone" class="click-flash">.onGone()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></li><li><a href="#onnear" class="click-flash">.onNear()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></li><li><a href="#ontouch" class="click-flash">.onTouch()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></li><li><a href="#onpickup" class="click-flash">.onPickup()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></li><li class="divider"></li><li><a href="#getvalue" class="click-flash">.getValue()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></li><li><a href="#getrawvalue" class="click-flash">.getRawValue()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></li><li><a href="#getactivelevel" class="click-flash">.getActiveLevel()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></li><li class="divider"></li><li><a href="#onvaluechange" class="click-flash">.onValueChange()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></li><li><a href="#onrawvaluechange" class="click-flash">.onRawValueChange()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></li><li><a href="#onactivelevelchange" class="click-flash">.onActiveLevelChange()</a><span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></li><li class="divider"></li><li><a href="#setmodifier" class="click-flash">.setModifier(value)</a></li><li><a href="#resetmodifier" class="click-flash">.resetModifier()</a></li></ul><div class="section"><div translate="no" class="method-name"><div id="constructor" class="anchor"></div>RBD::HumanSensor constructor(send_pin, receive_pin)</div><p>Pass in integers for the send and receive pins to create a new instance of this class.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[RBD::HumanSensor human_sensor(2, 3);

void setup() {
  ...
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="setsamplesize" class="anchor"></div><div class="light">human_sensor</div>.setSampleSize(value)</div><p>Pass in an integer to change the number of readings taken to calculate the moving average&nbsp;<a href="#getrawvalue" translate="no" class="click-flash">getRawValue()</a>. This can be called inside of setup() or also safely at runtime inside of loop().</p><ul><li><b>Decrease Variation</b> in readings by making this number larger: 1000</li><li><b>Increase Variation</b> in readings by making this number smaller: 10</li><li><b>Default Value</b>: 250</li></ul><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void setup() {
  human_sensor.setSampleSize(1000);
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="setnearvalue" class="anchor"></div><div class="light">human_sensor</div>.setNearValue(value)</div><p>Provide an integer from&nbsp;<a href="#getrawvalue" translate="no" class="click-flash">getRawValue()</a> to calibrate the lowest threshold for when a person is near the sensor.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void setup() {
  human_sensor.setNearValue(100);
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="settouchvalue" class="anchor"></div><div class="light">human_sensor</div>.setTouchValue(value)</div><p>Provide an integer from&nbsp;<a href="#getrawvalue" translate="no" class="click-flash">getRawValue()</a> to calibrate the lowest threshold for when a person is touching the sensor.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void setup() {
  human_sensor.setTouchValue(150);
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="setpickupvalue" class="anchor"></div><div class="light">human_sensor</div>.setPickupValue(value)</div><p>Provide an integer from&nbsp;<a href="#getrawvalue" translate="no" class="click-flash">getRawValue()</a> to calibrate the lowest threshold for when a person is picking up the sensor.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void setup() {
  human_sensor.setPickupValue(200);
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="update" class="anchor"></div><div class="light">human_sensor</div>.update()<span data-toggle="tooltip" data-placement="right" title="You must continuously call this method within loop() to use any Real-Time methods." class="label label-primary"><img src="assets/images/update.png" alt="Update"></span></div><p>Keep processing the readings and move this library along in real-time.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="isgone" class="anchor"></div><div class="light">human_sensor</div>.isGone()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></div><p>Returns true if no human is present and the sensor is reading a value below the&nbsp;<a href="#setnearvalue" translate="no" class="click-flash">setNearValue()</a>. This will always return true if no thresholds (near, touch, pickup) are set.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(human_sensor.isGone()) {
    ...
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="isnear" class="anchor"></div><div class="light">human_sensor</div>.isNear()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></div><p>Returns true if a human is present and the sensor is reading a value at or above the&nbsp;<a href="#setnearvalue" translate="no" class="click-flash">setNearValue()</a>.</p><p>Returns false if the sensor is reading a value below the&nbsp;<a href="#setnearvalue" translate="no" class="click-flash">setNearValue()</a>, or if a&nbsp;<a href="#settouchvalue" translate="no" class="click-flash">setTouchValue()</a> has been assigned and the sensor is reading a value at or above the&nbsp;<a href="#istouch" translate="no" class="click-flash">isTouch()</a> value.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(human_sensor.isNear()) {
    ...
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="istouch" class="anchor"></div><div class="light">human_sensor</div>.isTouch()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></div><p>Returns true if a human is touching the sensor and it is reading a value at or above the&nbsp;<a href="#settouchvalue" translate="no" class="click-flash">setTouchValue()</a>.</p><p>Returns false if the sensor is reading a value below the&nbsp;<a href="#settouchvalue" translate="no" class="click-flash">setTouchValue()</a>, or if a&nbsp;<a href="#setpickupvalue" translate="no" class="click-flash">setPickupValue()</a> has been assigned and the sensor is reading a value at or above the&nbsp;<a href="#ispickup" translate="no" class="click-flash">isPickup()</a> value.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(human_sensor.isTouch()) {
    ...
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="ispickup" class="anchor"></div><div class="light">human_sensor</div>.isPickup()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></div><p>Returns true if a human is picking up the sensor and it is reading a value at or above the&nbsp;<a href="#setpickupvalue" translate="no" class="click-flash">setPickupValue()</a>.</p><p>Returns false if the sensor is reading a value below the&nbsp;<a href="#setpickupvalue" translate="no" class="click-flash">setPickupValue()</a>.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(human_sensor.isPickup()) {
    ...
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="ongone" class="anchor"></div><div class="light">human_sensor</div>.onGone()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></div><p>This method will return true once the sensor registers a value below the&nbsp;<a href="#setnearvalue" translate="no" class="click-flash">setNearValue()</a>. The active level must change away from and then come back to&nbsp;<a href="#isgone" translate="no" class="click-flash">isGone()</a> in order for this method to return true again.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(human_sensor.onGone()) {
    // code only runs once per event
    Serial.println("Gone");
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="onnear" class="anchor"></div><div class="light">human_sensor</div>.onNear()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></div><p>This method will return true once the sensor registers a value at or above the&nbsp;<a href="#setnearvalue" translate="no" class="click-flash">setNearValue()</a> and below the&nbsp;<a href="#settouchvalue" translate="no" class="click-flash">setTouchValue()</a>. The active level must change away from and then come back to&nbsp;<a href="#isnear" translate="no" class="click-flash">isNear()</a> in order for this method to return true again.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(human_sensor.onNear()) {
    // code only runs once per event
    Serial.println("Near");
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="ontouch" class="anchor"></div><div class="light">human_sensor</div>.onTouch()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></div><p>This method will return true once the sensor registers a value at or above the&nbsp;<a href="#settouchvalue" translate="no" class="click-flash">setTouchValue()</a> and below the&nbsp;<a href="#setpickupvalue" translate="no" class="click-flash">setPickupValue()</a>. The active level must change away from and then come back to&nbsp;<a href="#isnear" translate="no" class="click-flash">isTouch()</a> in order for this method to return true again.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(human_sensor.onTouch()) {
    // code only runs once per event
    Serial.println("Touch");
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="onpickup" class="anchor"></div><div class="light">human_sensor</div>.onPickup()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></div><p>This method will return true once the sensor registers a value at or above the&nbsp;<a href="#setpickupvalue" translate="no" class="click-flash">setPickupValue()</a>. The active level must change away from and then come back to&nbsp;<a href="#ispickup" translate="no" class="click-flash">isPickup()</a> in order for this method to return true again.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(human_sensor.onPickup()) {
    // code only runs once per event
    Serial.println("Pickup");
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="getvalue" class="anchor"></div><div class="light">human_sensor</div>.getValue()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></div><p>Returns the capacitance sensor reading after being adjusted with the value given to&nbsp;<a href="#setmodifier" translate="no" class="click-flash">setModifier()</a>.</p><p>This will return the raw capacitance sensor reading if you have not used&nbsp;<a href="#setmodifier" translate="no" class="click-flash">setModifier()</a> yet, or if you have called&nbsp;<a href="#resetmodifier" translate="no" class="click-flash">resetModifier()</a>.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(human_sensor.onValueChange()) {
    Serial.println(human_sensor.getValue());
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="getrawvalue" class="anchor"></div><div class="light">human_sensor</div>.getRawValue()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></div><p>Returns the raw capacitance sensor reading and ignores any value that has been passed to&nbsp;<a href="#setmodifier" translate="no" class="click-flash">setModifier()</a>.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  Serial.println(human_sensor.getRawValue());
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="getactivelevel" class="anchor"></div><div class="light">human_sensor</div>.getActiveLevel()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span></div><p>Returns the current sensor level after being adjusted by&nbsp;<a href="#setmodifier" translate="no" class="click-flash">setModifier()</a>.</p><ul><li>&nbsp;<b>0</b>&nbsp;&nbsp;no human is present</li><li>&nbsp;<b>1</b>&nbsp;&nbsp;a human is near</li><li>&nbsp;<b>2</b>&nbsp;&nbsp;a human is touching the sensor</li><li>&nbsp;<b>3</b>&nbsp;&nbsp;a human is picking up the sensor</li><li><b>-1</b>&nbsp;&nbsp;an error occured (non-continuous range)</li></ul><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  Serial.println(human_sensor.getActiveLevel());
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="onvaluechange" class="anchor"></div><div class="light">human_sensor</div>.onValueChange()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></div><p>This method will return true once the&nbsp;<a href="#getvalue" translate="no" class="click-flash">getValue()</a> changes.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(human_sensor.onValueChange()) {
    // code only runs once per event
    Serial.println(human_sensor.getValue());
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="onrawvaluechange" class="anchor"></div><div class="light">human_sensor</div>.onRawValueChange()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></div><p>This method will return true once the&nbsp;<a href="#getrawvalue" translate="no" class="click-flash">getRawValue()</a> changes.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(human_sensor.onRawValueChange()) {
    // code only runs once per event
    Serial.println(human_sensor.getRawValue());
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="onactivelevelchange" class="anchor"></div><div class="light">human_sensor</div>.onActiveLevelChange()<span data-toggle="tooltip" data-placement="right" title="Real-Time: You must continuously call update() to use this method." translate="yes" class="label label-success">Real-Time</span><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></div><p>This method will return true once the&nbsp;<a href="#getactivelevel" translate="no" class="click-flash">getActiveLevel()</a> changes.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(human_sensor.onActiveLevelChange()) {
    // code only runs once per event
    Serial.println(human_sensor.getActiveLevel());
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="setmodifier" class="anchor"></div><div class="light">human_sensor</div>.setModifier(value)</div><p>Provide a positive or negative integer to temporarily adjust the human sensor threshold scale. The default value is 0.</p><p><i>For example</i>; if you have calibrated the scale and turn on a motor near the sensor: all readings will need to be adjusted for the increased capacitance from the motor.</p><ul><li>If a running motor increases the difference in human sensor readings by a&nbsp;<a href="#getrawvalue" translate="no" class="click-flash">getRawValue()</a> of +200</li><li>Call&nbsp;<a href="#setmodifier" translate="no" class="click-flash">setModifier(-200)</a> on the human sensor when the motor turns on</li><li>All of the calibrated human sensor thresholds will adjust -200</li><li>The human sensor readings will account for motor interference</li><li>Call&nbsp;<a href="#resetmodifier" translate="no" class="click-flash">resetModifier()</a> on the human sensor when the motor shuts off</li></ul><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(...) { // motor is on
    human_sensor.setModifier(-200);
  }
  else {
    human_sensor.resetModifier();
  }

  // when the motor is on; require +200 more from
  // the raw sensor reading to trigger all events
  if(human_sensor.isNear()) {
    ...
  }
  else if(...) {
    ...
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="resetmodifier" class="anchor"></div><div class="light">human_sensor</div>.resetModifier()</div><p>Changes the&nbsp;<a href="#setmodifier" translate="no" class="click-flash">setModifier()</a> back to 0 and resets calibration of the human sensor threshold scale.</p><p><i>For example</i>; if you have calibrated the scale and turn on a motor near the sensor: all readings will need to be adjusted for the increased capacitance from the motor.</p><ul><li>If a running motor increases the difference in human sensor readings by a&nbsp;<a href="#getrawvalue" translate="no" class="click-flash">getRawValue()</a> of +200</li><li>Call&nbsp;<a href="#setmodifier" translate="no" class="click-flash">setModifier(-200)</a> on the human sensor when the motor turns on</li><li>All of the calibrated human sensor thresholds will adjust -200</li><li>The human sensor readings will account for motor interference</li><li>Call&nbsp;<a href="#resetmodifier" translate="no" class="click-flash">resetModifier()</a> on the human sensor when the motor shuts off</li></ul><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  human_sensor.update();

  if(...) {
    human_sensor.setModifier(-200);
  }
  else {  // motor is off
    human_sensor.resetModifier();
  }

  // when the motor is off; reset the
  // threshold values for all events
  if(human_sensor.isNear()) {
    ...
  }
  else if(...) {
    ...
  }
}
]]></script></div></div><div class="bottom-nav hidden visible-xs-block"><div class="panel panel-default side-panel"><div class="panel-heading"><div class="panel-title"><a href="docs-arduino.html">Arduino Libraries</a></div></div><div translate="no" class="panel-body"><h3 translate="yes">Components</h3><ul><li><a href="docs-arduino-button.html" class="rbd_button">Button</a></li><li><a href="docs-arduino-light.html" class="rbd_light">Light</a></li><li><a href="docs-arduino-motor.html" class="rbd_motor">Motor</a></li><li><a href="docs-arduino-servo.html" class="rbd_servo">Servo</a></li></ul><h3 translate="yes">Sensors</h3><ul><li><a href="docs-arduino-light-sensor.html" class="rbd_light_sensor">Light Sensor</a></li><li><a href="docs-arduino-water-sensor.html" class="rbd_water_sensor">Water Sensor</a></li><li><a href="docs-arduino-human-sensor.html" class="rbd_human_sensor">Human Sensor</a></li></ul><h3 translate="yes">Additional Libraries</h3><ul><li><a href="docs-arduino-timer.html" class="rbd_timer">Timer</a></li><li><a href="docs-arduino-threshold.html" class="rbd_threshold">Threshold</a></li><li><a href="docs-arduino-capacitance.html" class="rbd_capacitance">Capacitance</a></li><li><a href="docs-arduino-serial-manager.html" class="rbd_serial_manager">Serial Manager</a></li></ul></div></div></div></div></div></div><div id="modal" tabindex="-1" role="dialog" class="modal fade"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" data-dismiss="modal" aria-label="Close" class="close"><span aria-hidden="true">x</span></button><h4 id="modalLabel" class="modal-title">Library Installation</h4></div><div class="modal-body"><div class="install-step"><h3>Step 1</h3><p class="lead">Check your downloads folder and double-click the&nbsp;<img src="assets/images/zip-icon.png" alt=".zip icon"> HumanSensor.zip file.</p></div><div class="install-step"><h3>Step 2</h3><p class="lead">Move the un-zipped contents of the&nbsp;<img src="assets/images/folder-icon.png" alt="folder icon"> HumanSensor folder to the Arduino&nbsp;<img src="assets/images/folder-icon.png" alt="folder icon"> libraries folder:</p><h5>INSTALL PATH</h5><div translate="no"><script type="syntaxhighlighter" class="brush: shell; gutter: false;"><![CDATA[Windows:       My Documents\Arduino\libraries
Mac & Linux:   Documents/Arduino/libraries
]]></script><h5>FOLDER STRUCTURE</h5><div class="image"><img src="assets/images/install-folder-structure-documents.png" alt="Documents/Arduino/Libraries"></div><div class="image"><img src="assets/images/install-folder-structure-capacitance.png" alt="RBD_Capacitance"></div><div class="image"><img src="assets/images/install-folder-structure-human-sensor.png" alt="RBD_HumanSensor"></div><div class="image"><img src="assets/images/install-folder-structure-threshold.png" alt="RBD_Threshold"></div></div></div><div class="install-step"><h3>Step 3</h3><p class="lead">Upgrade to&nbsp;<a href="https://www.arduino.cc/en/Main/Software">Arduino IDE v1.5 or greater</a> and load the&nbsp;<a href="#example-sketch" class="close-modal">Example&nbsp;<span translate="no">Sketch</span></a> to get started.</p></div></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-default">Close</button></div></div></div></div><div class="navbar navbar-default navbar-footer"><div class="container-fluid"><div class="row"><div class="col-xs-12 text-center">&copy; 2015&nbsp;<span id="copyright-year"></span><a href="http://opensource.org/licenses/mit-license.php">MIT License</a></div></div></div></div><script src="assets/code/jquery.min.js"></script><script src="assets/code/bootstrap.min.js"></script><script src="assets/code/init_bootstrap.js"></script><script src="assets/code/back_to_top.js"></script><script src="assets/code/jquery.stuck.js"></script><script src="assets/code/init_jquery_stuck.js"></script><script src="assets/code/google_analytics.js"></script><script src="assets/code/inspectlet.js"></script><script src="assets/code/ga_events.js"></script><script src="assets/code/jquery.timeago.js"></script><script src="assets/code/github_api.js"></script><script src="assets/code/github_repo.js"></script><script src="assets/code/year.js"></script><script src="assets/code/shCore.js"></script><script src="assets/code/shLegacy.js"></script><script src="assets/code/shAutoloader.js"></script><script src="assets/code/shBrushArduino.js"></script><script src="assets/code/shBrushBash.js"></script><script src="assets/code/shBrushJScript.js"></script><script src="assets/code/syntax_highlighter.js"></script><script src="assets/code/click_flash.js"></script><script src="assets/code/jquery.color.min.js"></script><script src="assets/code/download_instructions.js"></script><script src="assets/code/jquery-nav-menu.js"></script><script src="assets/code/example_sketch_buttons.js"></script><script>$(document).ready(function(){
  (new GithubRepo({
    user: "alextaujenis",
    repo: "RBD_HumanSensor"
  })).render();
  $(".rbd_human_sensor").addClass("selected")
});</script></body></html>