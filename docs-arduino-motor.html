<!DOCTYPE html><html lang="en"><head><title>Robots + Big Data: Motor Documentation</title><link href="assets/style/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="assets/style/shCore.css" rel="stylesheet" type="text/css"><link href="assets/style/shCoreDefault.css" rel="stylesheet" type="text/css"><link href="assets/style/shThemeDefault.css" rel="stylesheet" type="text/css"><link href="assets/style/style.css" rel="stylesheet" type="text/css"><link href="assets/style/docs.css" rel="stylesheet" type="text/css"><link href="assets/style/install.css" rel="stylesheet" type="text/css"><meta content="width=device-width initial-scale=1" name="viewport"></head><body><a name="top"></a><div class="top-nav-spacer1 stuck">&nbsp;</div><div class="top-nav-spacer2">&nbsp;</div><div class="navbar navbar-default navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><button id="toggle" type="button" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="index.html" class="navbar-brand">Robots + Big Data</a></div><!-- Collect the links for mobile toggling--><div id="navbar-collapse" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="install.html">Install</a></li><li><a href="docs-arduino.html">Docs</a></li><li><a href="github.html">GitHub</a></li><li><a href="#top" style="display:none;" class="back-to-top">BACK TO TOP</a></li></ul></div></div></div><div class="container-fluid"><div class="row"><div class="hidden-xs col-sm-4 stuck"><div class="panel panel-default side-panel"><div class="panel-heading"><div class="panel-title"><a href="docs-arduino.html">Arduino Libraries</a></div></div><div class="panel-body"><h3>Components & Sensors</h3><ul><li><a href="docs-arduino-light.html">Light</a><span data-toggle="tooltip" data-placement="left" title="Timer Dependency" class="badge pull-right">1</span></li><li><a href="docs-arduino-motor.html">Motor</a><span data-toggle="tooltip" data-placement="left" title="Timer Dependency" class="badge pull-right">1</span></li><li><a href="docs-arduino-human-sensor.html">Human Sensor</a><span data-toggle="tooltip" data-placement="left" title="Capacitance and Threshold Dependencies" class="badge pull-right">2</span></li><li><a href="docs-arduino-water-sensor.html">Water Sensor</a><span data-toggle="tooltip" data-placement="left" title="Capacitance and Threshold Dependencies" class="badge pull-right">2</span></li><li><a href="docs-arduino-light-sensor.html">Light Sensor</a></li></ul><h3>Additional Libraries</h3><ul><li><a href="docs-arduino-timer.html">Timer</a></li><li><a href="docs-arduino-threshold.html">Threshold</a></li><li><a href="docs-arduino-capacitance.html">Capacitance</a></li></ul></div></div></div><div class="documentation col-sm-8"><ol class="breadcrumb stuck"><li><a href="index.html">Home</a></li><li><a href="docs-arduino.html">Arduino</a></li><li class="active">Motor</li><a href="https://github.com/alextaujenis/RobotsBigData/edit/gh-pages/app/templates/docs-arduino-motor.jade" data-toggle="tooltip" data-placement="left" title="Edit this page on GitHub." class="pull-right edit-page">edit</a></ol><div class="jumbotron"><div class="stuck click-through"><div class="row jumbotron-header click-through"><div class="col-xs-12 text-right click-through"><span class="label label-info title-label">Arduino</span></div></div></div><div class="jumbotron-container"><h2>Motor<small> API DOCUMENTATION</small></h2><p>Control many motors.<small>v1.0.3</small></p><a href="#download" class="btn btn-success">Download</a>&nbsp;&nbsp;<a href="#example-sketch" class="btn btn-default">See Example</a>&nbsp;&nbsp;<a href="#public-methods" class="btn btn-default">Public Methods</a></div></div><h3><a name="overview"></a>Overview</h3><p class="lead">Control many motors without delay using commands like&nbsp;<a href="#on" class="click-flash">on()</a>,&nbsp;<a href="#off" class="click-flash">off()</a>,&nbsp;<a href="#timedon" class="click-flash">timedOn()</a>, and&nbsp;<a href="#ramp" class="click-flash">ramp()</a>. Fire custom events when the motor has reached the target speed with&nbsp;<a href="#ontargetspeed" class="click-flash">onTargetSpeed()</a>. Motors must be correctly wired to PWM enabled Arduino pins to work with this library.</p><h3><a name="download"></a>Download</h3><p>This library is part of a larger package that you can download to access<i> all</i> of the documented sensors,&nbsp;<i>or</i> you can use this library by itself with one dependency.</p><p><ul><li><a href="https://github.com/alextaujenis/RBD_Motor/raw/master/extras/RBD_Motor.zip">Download Motor Library v1.0.3&nbsp;<label class="label label-warning zip-label">.zip</label></a> by itself with the&nbsp;<a href="https://github.com/alextaujenis/RBD_Timer/raw/master/extras/RBD_Timer.zip" class="dark-link">Timer</a> dependency, or</li><li><a href="install.html">Download All Sensor Libraries</a> with this library and dependency included, or</li><li><a href="https://github.com/alextaujenis/RBD_Motor">View Source on GitHub</a> with&nbsp;<a href="http://opensource.org/licenses/mit-license.php" class="dark-link">MIT license</a></li></ul></p><h3><a name="example-sketch"></a>Example Sketch<span class="label label-info">Arduino</span><span class="label label-primary">C++</span></h3><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[#include <RBD_Timer.h>
#include <RBD_Motor.h>

RBD::Motor motor(3); // PWM pin 3

void setup() {
  motor.rampUp(1000);
}

void loop() {
  motor.update();

  if(motor.onTargetSpeed()) {
    if(motor.isOn()) {
      motor.rampDown(1000);
    }
    if(motor.isOff()) {
      motor.rampUp(1000);
    }
  }
}]]></script><h3><a name="public-methods"></a>Public Methods</h3><p>You can use this library without calling&nbsp;<a href="#update" class="click-flash">update()</a> and&nbsp;<i>most</i> methods will function correctly. You must continuously call&nbsp;<a href="#update" class="click-flash">update()</a> inside of loop() in order to use the<span class="label label-success">REAL-TIME</span> methods tagged below.</p><h4 class="class-name"><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[RBD::Motor
]]></script></h4><ul class="public-methods"><li><a href="#constructor" class="click-flash">constructor(pin)</a></li><hr class="divider"><li><a href="#on" class="click-flash">.on()</a></li><li><a href="#off" class="click-flash">.off()</a></li><li><a href="#setpwm" class="click-flash">.setPwm(value)</a></li><li><a href="#setpwmpercent" class="click-flash">.setPwmPercent(value)</a></li><hr class="divider"><li><a href="#ison" class="click-flash">.isOn()</a></li><li><a href="#isoff" class="click-flash">.isOff()</a></li><li><a href="#getpwm" class="click-flash">.getPwm()</a></li><li><a href="#getpwmpercent" class="click-flash">.getPwmPercent()</a></li><li><a href="#ispwm" class="click-flash">.isPwm(value)</a></li><li><a href="#ispwmpercent" class="click-flash">.isPwmPercent(value)</a></li><hr class="divider"><li><a href="#update" class="click-flash">.update()</a><span data-toggle="tooltip" data-placement="right" title="This helps move real-time methods along." class="label label-primary">PROCESS REAL-TIME</span></li><li><a href="#timedon" class="click-flash">.timedOn(timeout)</a><span data-toggle="tooltip" data-placement="right" title="You must continuously call update() to use this method." class="label label-success">REAL-TIME</span></li><li><a href="#rampup" class="click-flash">.rampUp(timeout)</a><span data-toggle="tooltip" data-placement="right" title="You must continuously call update() to use this method." class="label label-success">REAL-TIME</span></li><li><a href="#rampdown" class="click-flash">.rampDown(timeout)</a><span data-toggle="tooltip" data-placement="right" title="You must continuously call update() to use this method." class="label label-success">REAL-TIME</span></li><li><a href="#ramp" class="click-flash">.ramp(value, timeout)</a><span data-toggle="tooltip" data-placement="right" title="You must continuously call update() to use this method." class="label label-success">REAL-TIME</span></li><li><a href="#ramppercent" class="click-flash">.rampPercent(value, timeout)</a><span data-toggle="tooltip" data-placement="right" title="You must continuously call update() to use this method." class="label label-success">REAL-TIME</span></li><hr class="divider"><li><a href="#ontargetspeed" class="click-flash">.onTargetSpeed()</a><span data-toggle="tooltip" data-placement="right" title="You must continuously call update() to use this method." class="label label-success">REAL-TIME</span><span data-toggle="tooltip" data-placement="right" title="Use this method to find when an event has been triggered." class="label label-default">EVENT</span></li></ul><div class="section"><a name="constructor"></a><h4>RBD::Motor constructor(pin)</h4><p>Create a new motor and pass in the Arduino pin number.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[RBD::Motor motor(3); // pwm pin 3

void setup() {
  ...
}
]]></script></div><div class="section"><a name="on"></a><h4>motor.on()</h4><p>Start the motor at full speed.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.on();
}
]]></script></div><div class="section"><a name="off"></a><h4>motor.off()</h4><p>Stop the motor.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.off();
}
]]></script></div><div class="section"><a name="setpwm"></a><h4>motor.setPwm(value)</h4><p>Pass in an integer from 0 - 255 to control the speed of the motor.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.setPwm(85); // one-third speed
}
]]></script></div><div class="section"><a name="setpwmpercent"></a><h4>motor.setPwmPercent(value)</h4><p>Pass in an integer from 0 - 100 to control the speed percentage of the motor. This is essentially the same as&nbsp;<a href="#setpwm" class="click-flash">setPwm()</a> but with a smaller input scale.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.setPwmPercent(50); // half speed
}
]]></script></div><div class="section"><a name="ison"></a><h4>motor.isOn()</h4><p>Returns true if the motor is running at 100% speed.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.on();
}

void loop() {
  Serial.println(motor.isOn());
}
]]></script></div><div class="section"><a name="isoff"></a><h4>motor.isOff()</h4><p>Returns true if the motor is running at 0% speed.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.off();
}

void loop() {
  Serial.println(motor.isOff());
}
]]></script></div><div class="section"><a name="getpwm"></a><h4>motor.getPwm()</h4><p>Returns an integer from 0 - 255 for the current motor speed.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.setPwm(123);
}

void loop() {
  Serial.println(motor.getPwm());
}
]]></script></div><div class="section"><a name="getpwmpercent"></a><h4>motor.getPwmPercent()</h4><p>Returns an integer from 0 - 100 for the current motor speed percentage.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.setPwmPercent(45);
}

void loop() {
  Serial.println(motor.getPwmPercent());
}
]]></script></div><div class="section"><a name="ispwm"></a><h4>motor.isPwm(value)</h4><p>Provide an integer from 0 to 255 and this will return true if it's equal to the current&nbsp;<a href="#getpwm" class="click-flash">getPwm()</a>.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.ramp(99, 1000);
}

void loop() {
  motor.update()

  if(motor.onTargetSpeed()) {
    if(motor.isPwm(99)) {
      ...
    }
  }
}
]]></script></div><div class="section"><a name="ispwmpercent"></a><h4>motor.isPwmPercent(value)</h4><p>Provide an integer from 0 to 100 and this will return true if it's equal to the current&nbsp;<a href="#getpwmpercent" class="click-flash">getPwmPercent()</a>.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.rampPercent(45, 1000);
}

void loop() {
  motor.update()

  if(motor.onTargetSpeed()) {
    if(motor.isPwmPercent(45)) {
      ...
    }
  }
}
]]></script></div><div class="section"><a name="update"></a><h4>motor.update()<span data-toggle="tooltip" data-placement="right" title="This helps move real-time methods along." class="label label-primary">PROCESS REAL-TIME</span></h4><p>Keep the real-time functions processing with each loop().</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void loop() {
  motor.update();
}
]]></script></div><div class="section"><a name="timedon"></a><h4>motor.timedOn(timeout)<span data-toggle="tooltip" data-placement="right" title="You must continuously call update() to use this method." class="label label-success">REAL-TIME</span></h4><p>Start the motor at full speed and turn it off after the specified time in milliseconds.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.timedOn(5000);
}

void loop() {
  motor.update();
}
]]></script></div><div class="section"><a name="rampup"></a><h4>motor.rampUp(timeout)<span data-toggle="tooltip" data-placement="right" title="You must continuously call update() to use this method." class="label label-success">REAL-TIME</span></h4><p>Pass in a timeout in milliseconds for how long it will take to ramp from the current speed to full speed with a linear transition.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.rampUp(3000);
}

void loop() {
  motor.update();
}
]]></script></div><div class="section"><a name="rampdown"></a><h4>motor.rampDown(timeout)<span data-toggle="tooltip" data-placement="right" title="You must continuously call update() to use this method." class="label label-success">REAL-TIME</span></h4><p>Pass in a timeout in milliseconds for how long it will take to ramp from the current speed to full stop with a linear transition.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.on();
  motor.rampDown(4000);
}

void loop() {
  motor.update();
}
]]></script></div><div class="section"><a name="ramp"></a><h4>motor.ramp(value, timeout)<span data-toggle="tooltip" data-placement="right" title="You must continuously call update() to use this method." class="label label-success">REAL-TIME</span></h4><p>Pass in a value from 0 - 255 to control the target speed of the motor, and a timeout in milliseconds for how long it will take to ramp to that target speed from the current speed with a linear transition.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.ramp(85, 2000); // one-third speed in 2 seconds
}

void loop() {
  motor.update();
}
]]></script></div><div class="section"><a name="ramppercent"></a><h4>motor.rampPercent(value, timeout)<span data-toggle="tooltip" data-placement="right" title="You must continuously call update() to use this method." class="label label-success">REAL-TIME</span></h4><p>Pass in a value from 0 - 100 to control the target speed of the motor, and a timeout in milliseconds for how long it will take to ramp to that target speed from the current speed with a linear transition. This is essentially the same as&nbsp;<a href="#ramp" class="click-flash">ramp()</a> but with a smaller input scale.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.rampPercent(50, 1000); // half speed in 1 second
}

void loop() {
  motor.update();
}
]]></script></div><div class="section"><a name="ontargetspeed"></a><h4>motor.onTargetSpeed()<span data-toggle="tooltip" data-placement="right" title="You must continuously call update() to use this method." class="label label-success">REAL-TIME</span><span data-toggle="tooltip" data-placement="right" title="Use this method to find when an event has been triggered." class="label label-default">EVENT</span></h4><p>This method will return true once the motor hits the target speed set in any of the real-time methods. This method will return false until a new target speed is set (with a real-time method) and then achieved by the motor.</p><h5>EXAMPLE SKETCH</h5><script type="syntaxhighlighter" class="brush: cpp; gutter: false;"><![CDATA[void setup() {
  motor.off();
  motor.rampPercent(50, 5000);
}

void loop() {
  motor.update();

  if(motor.onTargetSpeed()) {
    // code only runs once per event
    Serial.println("Target Speed");
  }
}
]]></script></div></div></div></div><script src="assets/code/jquery.min.js"></script><script src="assets/code/bootstrap.min.js"></script><script src="assets/code/init_bootstrap.js"></script><script src="assets/code/back_to_top.js"></script><script src="assets/code/jquery.stuck.js"></script><script src="assets/code/init_jquery_stuck.js"></script><script src="assets/code/google_analytics.js"></script><script src="assets/code/inspectlet.js"></script><script src="assets/code/shCore.js"></script><script src="assets/code/shLegacy.js"></script><script src="assets/code/shAutoloader.js"></script><script src="assets/code/shBrushCpp.js"></script><script src="assets/code/shBrushBash.js"></script><script src="assets/code/shBrushJScript.js"></script><script src="assets/code/syntax_highlighter.js"></script><script src="assets/code/click_flash.js"></script><script src="assets/code/jquery.color.min.js"></script><div class="navbar navbar-default navbar-footer"><div class="container-fluid"><div class="row"><div class="col-xs-12 text-right">&copy; 2015&nbsp;<a href="http://opensource.org/licenses/mit-license.php">MIT License</a></div></div></div></div></body></html>