<!DOCTYPE html><html lang="en"><head><title>Robots + Big Data: Arduino Timer Docs</title><meta name="description" content="An Arduino library to easily manage many timed events without delay, interrupts, or callbacks."><link href="assets/style/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="assets/style/shCore.css" rel="stylesheet" type="text/css"><link href="assets/style/shCoreDefault.css" rel="stylesheet" type="text/css"><link href="assets/style/shThemeDefault.css" rel="stylesheet" type="text/css"><link href="assets/style/style.css" rel="stylesheet" type="text/css"><link href="assets/style/docs.css" rel="stylesheet" type="text/css"><link href="assets/style/install.css" rel="stylesheet" type="text/css"><link href="assets/style/index.css" rel="stylesheet" type="text/css"><meta content="width=device-width, initial-scale=1" name="viewport"></head><body><div id="top"></div><div class="top-nav-spacer1 stuck">&nbsp;</div><div class="top-nav-spacer2">&nbsp;</div><div class="navbar navbar-default navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><button id="toggle" type="button" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="index.html" class="navbar-brand"><img src="assets/images/robots-big-data-logo-sm.png" alt="Robots + Big Data"></a></div><!-- Collect the links for mobile toggling--><div id="navbar-collapse" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="install.html">Install</a></li><li><a href="docs-arduino.html">Docs</a></li><li><a href="github.html">GitHub</a></li><li><a href="#top" style="display:none;" class="back-to-top">BACK TO TOP</a></li></ul></div></div></div><div class="container-fluid"><div class="row"><div class="hidden-xs col-sm-4 stuck"><div class="panel panel-default side-panel"><div class="panel-heading"><div class="panel-title"><a href="docs-arduino.html">Arduino Libraries</a></div></div><div translate="no" class="panel-body"><h3 translate="yes">Components</h3><ul><li><a href="docs-arduino-button.html">Button</a></li><li><a href="docs-arduino-light.html">Light</a></li><li><a href="docs-arduino-motor.html">Motor</a></li><li><a href="docs-arduino-servo.html">Servo</a></li></ul><h3 translate="yes">Sensors</h3><ul><li><a href="docs-arduino-light-sensor.html">Light Sensor</a></li><li><a href="docs-arduino-water-sensor.html">Water Sensor</a></li><li><a href="docs-arduino-human-sensor.html">Human Sensor</a></li></ul><h3 translate="yes">Additional Libraries</h3><ul><li><a href="docs-arduino-timer.html">Timer</a></li><li><a href="docs-arduino-threshold.html">Threshold</a></li><li><a href="docs-arduino-capacitance.html">Capacitance</a></li><li><a href="docs-arduino-serial-manager.html">Serial Manager</a></li></ul></div></div></div><div class="documentation col-sm-8"><ol class="breadcrumb stuck"><li><a href="index.html">Home</a></li><li><a href="docs-arduino.html">Arduino</a></li><li translate="no" class="active">Timer</li></ol><div class="jumbotron"><div class="stuck click-through"><div class="row jumbotron-header click-through"><div class="col-xs-12 text-right click-through"><span class="label label-info title-label">Arduino</span></div></div></div><div class="jumbotron-container"><h2 translate="no">Timer<small translate="no"> API DOCUMENTATION</small></h2><p>Manage many timed events.<small>v1.1.1</small></p><a href="#how-to-install" class="btn btn-primary">How to Install</a>&nbsp;&nbsp;<a href="#example-setup" class="btn btn-default">See Example</a>&nbsp;&nbsp;<a href="#public-methods" class="btn btn-default">Public Methods</a></div></div><div class="h3"><div id="overview" class="anchor"></div>Overview</div><p class="lead">The Arduino real-time loop stops advancing when you write delay() or use interrupts in your sketch. You can keep the real-time loop moving by using millis() to track time and create delay, but it's more complicated and soon becomes messy to manage.</p><p class="lead">This lightweight library manages time the same way you would by setting a waypoint and calculating elapsed millis(). It is a simple replacement to manage your timed events with english instead of math.</p><div class="h3"><div id="relativevsabsolute" class="anchor"></div>Soft Real-Time</div><p>This library performs in Soft Real-Time, which means that it will mostly stay on time but is allowed to slip if performance is an issue. This could look like a microsecond of time loss when the timer expires but before it is restarted. Or this could look like a busy Arduino loop() where the timer resolution degrades to only fire an event within 25 microseconds of an actual event. (A microsecond is a small fraction of a millisecond).</p><p>There are other solutions for Hard Real-Time problems that require exact timing, which cannot slip for any reason. These are considerations when using this timer within a project, but for the most part; performance is awesome and you should use this library.</p><div class="h3"><div id="how-to-install" class="anchor"></div>How to Install</div><p>This library is part of a larger package that you can install to access<i> all</i> of the documented sensors,&nbsp;<i>or</i> you can use this library by itself.</p><ul><li><a href="https://github.com/alextaujenis/RBD_Timer/raw/master/extras/RBD_Timer.zip">Download&nbsp;<span translate="no">Timer</span> Library v1.1.1&nbsp;<div class="label label-warning zip-label">.zip</div></a> by itself, or</li><li><a href="install.html">Download All Sensor Libraries</a> with this library included, or</li><li><a href="https://github.com/alextaujenis/RBD_Timer">View Source on GitHub</a> with&nbsp;<a href="http://opensource.org/licenses/mit-license.php" class="dark-link">MIT license</a></li></ul><div class="h3"><div id="example-setup" class="anchor"></div>Example Setup</div><ol><li>Install this library and load the example sketch onto an Arduino</li><li>Open a serial connection at 115200 baud</li><li>Watch a timer print to serial every three seconds</li></ol><div class="h3"><div id="example-sketch" class="anchor"></div>Example Sketch<span class="label label-info">Arduino</span><span class="label label-primary">C++</span></div><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[#include <RBD_Timer.h>

RBD::Timer timer;

void setup() {
  Serial.begin(115200);
  timer.setTimeout(3000);
  timer.restart();
}

void loop() {
  if(timer.onRestart()) {
    Serial.println("Three seconds passed");
  }
}
]]></script></div><div class="h3"><div id="public-methods" class="anchor"></div>Public Methods</div><h4 translate="no" class="class-name"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[RBD::Timer
]]></script></h4><ul translate="no" class="public-methods"><li><a href="#constructor" class="click-flash">constructor()</a></li><li class="divider"></li><li><a href="#settimeout" class="click-flash">.setTimeout(value)</a></li><li><a href="#sethertz" class="click-flash">.setHertz(value)</a></li><li class="divider"></li><li><a href="#restart" class="click-flash">.restart()</a></li><li><a href="#stop" class="click-flash">.stop()</a></li><li class="divider"></li><li><a href="#getvalue" class="click-flash">.getValue()</a></li><li><a href="#getpercentvalue" class="click-flash">.getPercentValue()</a></li><li><a href="#getinversevalue" class="click-flash">.getInverseValue()</a></li><li><a href="#getinversepercentvalue" class="click-flash">.getInversePercentValue()</a></li><li class="divider"></li><li><a href="#isactive" class="click-flash">.isActive()</a></li><li><a href="#isexpired" class="click-flash">.isExpired()</a></li><li><a href="#isstopped" class="click-flash">.isStopped()</a></li><li class="divider"></li><li><a href="#onactive" class="click-flash">.onActive()</a><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></li><li><a href="#onexpired" class="click-flash">.onExpired()</a><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></li><li><a href="#onrestart" class="click-flash">.onRestart()</a><span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></li></ul><div class="section"><div translate="no" class="method-name"><div id="constructor" class="anchor"></div>RBD::Timer constructor()</div><p>Create a new timer instance.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[RBD::Timer timer;

void setup() {
  ...
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="settimeout" class="anchor"></div><div class="light">timer</div>.setTimeout(value)</div><p>Provide an unsigned long greater than zero to change how long the timer will run (in milliseconds). This can be done inside of setup() or also inside of loop() to change the value at runtime.
This will override any value given to&nbsp;<a href="#sethertz" translate="no" class="click-flash">setHertz()</a>.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void setup() {
  timer.setTimeout(200);  // expire after 200ms
  timer.restart();
}

void loop() {
  if(timer.isExpired()) {
    // returns true after 200ms
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="sethertz" class="anchor"></div><div class="light">timer</div>.setHertz(value)</div><p>Provide an integer from 1 - 1000 to set approximately how many times the timer will restart in one second. This can be done inside of setup() or also inside of loop() to change the value at runtime.
This will override any value given to&nbsp;<a href="#settimeout" translate="no" class="click-flash">setTimeout()</a>.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void setup() {
  timer.setHertz(5);  // expire after 200ms
}

void loop() {
  if(timer.onRestart()) {
    // events fired here are close to 5Hz
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="restart" class="anchor"></div><div class="light">timer</div>.restart()</div><p>All you need to do is restart the timer when you want to use it. When you first initialize the timer; it will always start expired. This can be used with&nbsp;<a href="#isexpired" translate="no" class="click-flash">isExpired()</a> to create a continuous loop.</p><p>If you would like a tighter loop that does not wait for your code to run in order to restart the timer, then use&nbsp;<a href="#onrestart" translate="no" class="click-flash">onRestart()</a> instead.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  if(timer.isExpired()) {
    // run code here, then restart the timer
    timer.restart();
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="stop" class="anchor"></div><div class="light">timer</div>.stop()</div><p>Calling&nbsp;<a href="#stop" translate="no" class="click-flash">stop()</a> kills all events and prohibits everything except&nbsp;<a href="#isstopped" translate="no" class="click-flash">isStopped()</a> from returning true. You must call&nbsp;<a href="#restart" translate="no" class="click-flash">restart()</a> to activate the timer again.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  if(timer.onExpired()) {
    timer.stop();
  }

  if(timer.isExpired()) {
    // code here will not execute when stopped
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="getvalue" class="anchor"></div><div class="light">timer</div>.getValue()</div><p>Returns an unsigned long of how many milliseconds that have passed since the start of the timer.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  Serial.println(timer.getValue());
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="getpercentvalue" class="anchor"></div><div class="light">timer</div>.getPercentValue()</div><p>Returns an integer from 0 - 100 of how much time has passed as a percentage of the total interval. If the interval is 2000ms, and 500ms have passed: this method will return 25.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  Serial.println(timer.getPercentValue());
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="getinversevalue" class="anchor"></div><div class="light">timer</div>.getInverseValue()</div><p>Returns an unsigned long of how many milliseconds left until the end of the timer.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  Serial.println(timer.getInverseValue());
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="getinversepercentvalue" class="anchor"></div><div class="light">timer</div>.getInversePercentValue()</div><p>Returns an integer from 100 - 0 of the inverse of how much time has passed as a percentage of the total interval. If the interval is 2000ms, and 500ms have passed: this method will return 75.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  Serial.println(timer.getInversePercentValue());
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="isactive" class="anchor"></div><div class="light">timer</div>.isActive()</div><p>Returns true if time is available. Use this method with&nbsp;<a href="#getpercentvalue" translate="no" class="click-flash">getPercentValue()</a> or&nbsp;<a href="#getinversepercentvalue" translate="no" class="click-flash">getInversePercentValue()</a> to perform real-time actions tweened over time.</p><p>Use&nbsp;<a href="#onactive" translate="no" class="click-flash">onActive()</a> to only fire a single event when the timer goes active.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  if(timer.isActive()) {
    Serial.println(timer.getPercentValue());
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="isexpired" class="anchor"></div><div class="light">timer</div>.isExpired()</div><p>Returns true if time has run out. This can be used with&nbsp;<a href="#restart" translate="no" class="click-flash">restart()</a> to create a continuous loop where you execute code once and then restart the timer when the action is complete.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  if(timer.isExpired()) {
    // run code here and restart when finished
    timer.restart();
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="isstopped" class="anchor"></div><div class="light">timer</div>.isStopped()</div><p>Returns true after calling&nbsp;<a href="#stop" translate="no" class="click-flash">stop()</a>. Returns false if the timer&nbsp;<a href="#isactive" translate="no" class="click-flash">isActive()</a> or&nbsp;<a href="#isexpired" translate="no" class="click-flash">isExpired()</a>.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void setup() {
  timer.stop();
}

void loop() {
  if(timer.isStopped()) {
    Serial.println("Timer Stopped");
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="onactive" class="anchor"></div><div class="light">timer</div>.onActive()<span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></div><p>This method will fire a single event when the timer goes active. The timer must expire and then be restarted for this event to fire again.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  if(timer.onActive()) {
    // code only runs once per event
    Serial.println("Timer Active");
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="onexpired" class="anchor"></div><div class="light">timer</div>.onExpired()<span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></div><p>This method will fire a single event when the timer expires. The timer must be restarted and then allowed to expire for this event to fire again.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  if(timer.onExpired()) {
    // code only runs once per event
    Serial.println("Timer Expired");
  }
}
]]></script></div></div><div class="section"><div translate="no" class="method-name"><div id="onrestart" class="anchor"></div><div class="light">timer</div>.onRestart()<span data-toggle="tooltip" data-placement="right" title="Event: Use this method to find when an event has been triggered." translate="yes" class="label label-default">Event</span></div><p>This method will fire a single event and restart the timer each time it expires, mimicking the same process of creating a loop by calling&nbsp;<a href="#isexpired" translate="no" class="click-flash">isExpired()</a>  and&nbsp;<a href="#restart" translate="no" class="click-flash">restart()</a> together, but with a simple syntax and a tighter time loop.</p><h5>EXAMPLE&nbsp;<span translate="no">SKETCH</span></h5><div translate="no"><script type="syntaxhighlighter" class="brush: arduino; gutter: false;"><![CDATA[void loop() {
  if(timer.onRestart()) {
    // timer was restarted: code only runs once per restart
    Serial.println("Timer Restarted");
  }
}
]]></script></div></div><div class="bottom-nav hidden visible-xs-block"><div class="panel panel-default side-panel"><div class="panel-heading"><div class="panel-title"><a href="docs-arduino.html">Arduino Libraries</a></div></div><div translate="no" class="panel-body"><h3 translate="yes">Components</h3><ul><li><a href="docs-arduino-button.html">Button</a></li><li><a href="docs-arduino-light.html">Light</a></li><li><a href="docs-arduino-motor.html">Motor</a></li><li><a href="docs-arduino-servo.html">Servo</a></li></ul><h3 translate="yes">Sensors</h3><ul><li><a href="docs-arduino-light-sensor.html">Light Sensor</a></li><li><a href="docs-arduino-water-sensor.html">Water Sensor</a></li><li><a href="docs-arduino-human-sensor.html">Human Sensor</a></li></ul><h3 translate="yes">Additional Libraries</h3><ul><li><a href="docs-arduino-timer.html">Timer</a></li><li><a href="docs-arduino-threshold.html">Threshold</a></li><li><a href="docs-arduino-capacitance.html">Capacitance</a></li><li><a href="docs-arduino-serial-manager.html">Serial Manager</a></li></ul></div></div></div></div></div></div><div class="navbar navbar-default navbar-footer"><div class="container-fluid"><div class="row"><div class="col-xs-12 text-center">&copy; 2015&nbsp;<a href="http://opensource.org/licenses/mit-license.php">MIT License</a></div></div></div></div><script src="assets/code/jquery.min.js"></script><script src="assets/code/bootstrap.min.js"></script><script src="assets/code/init_bootstrap.js"></script><script src="assets/code/back_to_top.js"></script><script src="assets/code/jquery.stuck.js"></script><script src="assets/code/init_jquery_stuck.js"></script><script src="assets/code/google_analytics.js"></script><script src="assets/code/inspectlet.js"></script><script src="assets/code/shCore.js"></script><script src="assets/code/shLegacy.js"></script><script src="assets/code/shAutoloader.js"></script><script src="assets/code/shBrushArduino.js"></script><script src="assets/code/shBrushBash.js"></script><script src="assets/code/shBrushJScript.js"></script><script src="assets/code/syntax_highlighter.js"></script><script src="assets/code/click_flash.js"></script><script src="assets/code/jquery.color.min.js"></script></body></html>